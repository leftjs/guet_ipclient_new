{"version":3,"sources":["webpack:///webpack/bootstrap 103768d24009172fb158","webpack:///./src/index.js","webpack:///external \"puppeteer\"","webpack:///external \"commander\""],"names":["program","version","option","command","description","action","user","pass","login","console","log","parse","process","argv","args","length","help","browser","puppeteer","launch","headless","page","newPage","setViewport","width","height","goto","waitForSelector","timeout","then","pageTips","evaluate","document","getElementsByName","textContent","exit","catch","Function","errorMsg","getElementById"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;AC7DA;AACA;;AAEA,iDAAAA,CACGC,OADH,CACW,OADX,EAEGC,MAFH,CAEU,oBAFV,EAEgC,oBAFhC,EAGGA,MAHH,CAGU,oBAHV,EAGgC,kBAHhC;;AAKA,iDAAAF,CACGG,OADH,CACW,OADX,EAEGC,WAFH,CAEe,yBAFf,EAGGC,MAHH,CAGU,YAAY;AAClB,QAAM,EAAEC,IAAF,EAAQC,IAAR,KAAiB,iDAAvB;AACA,MAAID,QAAQC,IAAZ,EAAkB;AAChB,UAAMC,MAAMF,IAAN,EAAYC,IAAZ,CAAN;AACD,GAFD,MAEO;AACLE,YAAQC,GAAR,CAAY,wBAAZ;AACD;AACF,CAVH;;AAYA,iDAAAV,CAAQW,KAAR,CAAcC,QAAQC,IAAtB;;AAEA,IAAI,CAAC,iDAAAb,CAAQc,IAAR,CAAaC,MAAlB,EAA0B,iDAAAf,CAAQgB,IAAR;;AAE1B,eAAeR,KAAf,CAAqBF,IAArB,EAA2BC,IAA3B,EAAiC;AAC/B,QAAMU,UAAU,MAAM,iDAAAC,CAAUC,MAAV,CAAiB;AACrCC,cAAU;AAD2B,GAAjB,CAAtB;AAGA,QAAMC,OAAO,MAAMJ,QAAQK,OAAR,EAAnB;AACA,QAAMD,KAAKE,WAAL,CAAiB,EAAEC,OAAO,IAAT,EAAeC,QAAQ,GAAvB,EAAjB,CAAN;AACA,QAAMJ,KAAKK,IAAL,CAAU,sBAAV,CAAN;;AAEAL,OACGM,eADH,CACmB,mBADnB,EACwC,EAAEC,SAAS,IAAX,EADxC,EAEGC,IAFH,CAEQ,YAAY;AAChB,UAAMC,WAAW,MAAMT,KAAKU,QAAL,CAAc,MAAMC,SAASC,iBAAT,CAA2B,UAA3B,EAAuC,CAAvC,EAA0CC,WAA9D,CAAvB;AACA;AACAzB,YAAQC,GAAR,CAAYoB,QAAZ;AACAlB,YAAQuB,IAAR;AACD,GAPH,EAQGC,KARH,CAQS,YAAY;AACjB;AACA;AACA,UAAMf,KAAKU,QAAL,CACJ,IAAIM,QAAJ,CACE,GADF,EAEE,GAFF,EAGG;;;;SAHH,CADI,EAUJ/B,IAVI,EAWJC,IAXI,CAAN;;AAcAc,SACGM,eADH,CACmB,mBADnB,EACwC,EAAEC,SAAS,IAAX,EADxC,EAEGC,IAFH,CAEQ,YAAY;AAChB,YAAMC,WAAW,MAAMT,KAAKU,QAAL,CAAc,MAAMC,SAASC,iBAAT,CAA2B,UAA3B,EAAuC,CAAvC,EAA0CC,WAA9D,CAAvB;AACA;AACAzB,cAAQC,GAAR,CAAYoB,QAAZ;AACAlB,cAAQuB,IAAR;AACD,KAPH,EAQGC,KARH,CAQS,YAAY;AACjB,YAAME,WAAW,MAAMjB,KAAKU,QAAL,CAAc,MAAMC,SAASO,cAAT,CAAwB,SAAxB,EAAmCL,WAAvD,CAAvB;AACAzB,cAAQC,GAAR,CAAY4B,QAAZ;AACA1B,cAAQuB,IAAR;AACD,KAZH;AAaD,GAtCH;AAuCD,C;;;;;;ACvED,sC;;;;;;ACAA,sC","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 103768d24009172fb158","import puppeteer from \"puppeteer\";\nimport program from \"commander\";\n\nprogram\n  .version(\"1.0.0\")\n  .option(\"-u, --user [value]\", \"username for login\")\n  .option(\"-p, --pass [value]\", \"passwd for login\");\n\nprogram\n  .command(\"login\")\n  .description(\"login to campus network\")\n  .action(async () => {\n    const { user, pass } = program;\n    if (user && pass) {\n      await login(user, pass);\n    } else {\n      console.log(\"must input user & pass\");\n    }\n  });\n\nprogram.parse(process.argv);\n\nif (!program.args.length) program.help();\n\nasync function login(user, pass) {\n  const browser = await puppeteer.launch({\n    headless: false\n  });\n  const page = await browser.newPage();\n  await page.setViewport({ width: 1024, height: 768 });\n  await page.goto(\"http://10.36.254.11/\");\n\n  page\n    .waitForSelector(\"[name='PageTips']\", { timeout: 3000 })\n    .then(async () => {\n      const pageTips = await page.evaluate(() => document.getElementsByName(\"PageTips\")[0].textContent);\n      // 已经登录\n      console.log(pageTips);\n      process.exit();\n    })\n    .catch(async () => {\n      // 去登陆\n      // 执行登录操作\n      await page.evaluate(\n        new Function(\n          \"u\",\n          \"p\",\n          `\n        document.getElementsByName(\"DDDDD\")[1].value = u;\n        document.getElementsByName(\"upass\")[1].value = p; \n        document.getElementsByName(\"0MKKey\")[1].click();\n        `\n        ),\n        user,\n        pass\n      );\n\n      page\n        .waitForSelector(\"[name='PageTips']\", { timeout: 5000 })\n        .then(async () => {\n          const pageTips = await page.evaluate(() => document.getElementsByName(\"PageTips\")[0].textContent);\n          // 已经登录\n          console.log(pageTips);\n          process.exit();\n        })\n        .catch(async () => {\n          const errorMsg = await page.evaluate(() => document.getElementById(\"message\").textContent);\n          console.log(errorMsg);\n          process.exit();\n        });\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"puppeteer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"puppeteer\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"commander\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"commander\"\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}